namespace SpriteKind {
    export const generic_npc = SpriteKind.create()
    export const fishernpc = SpriteKind.create()
    export const skynpc = SpriteKind.create()
    export const servantnpc = SpriteKind.create()
    export const pot = SpriteKind.create()
    export const rose = SpriteKind.create()
    export const kitty = SpriteKind.create()
    export const candle = SpriteKind.create()
    export const chandelier = SpriteKind.create()
    export const Quella = SpriteKind.create()
    export const portal = SpriteKind.create()
    export const dark_manuscript_seller = SpriteKind.create()
    export const bubble = SpriteKind.create()
    export const feather = SpriteKind.create()
    export const misc = SpriteKind.create()
    export const mew = SpriteKind.create()
    export const bat = SpriteKind.create()
    export const coin = SpriteKind.create()
}
scene.onOverlapTile(SpriteKind.Player, assets.tile`myTile1`, function (sprite, location) {
    if (bubble2) {
    	
    } else {
        tiles.placeOnTile(mySprite, tiles.getTileLocation(69, 41))
        info.changeLifeBy(-1)
    }
})
controller.up.onEvent(ControllerButtonEvent.Pressed, function () {
    if (flight) {
        mySprite.vy += -225
    } else {
        if (mySprite.isHittingTile(CollisionDirection.Bottom)) {
            mySprite.vy += -225
        }
    }
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.kitty, function (sprite, otherSprite) {
    otherSprite.sayText("meow", 2000, false)
    if (controller.A.isPressed()) {
        if (talked_to_cat) {
            if (has_fish) {
                story.printCharacterText("meow, meow, thank you, meow, meow, get candle, meow", "cat")
                tiles.setWallAt(tiles.getTileLocation(36, 39), false)
                tiles.setWallAt(tiles.getTileLocation(36, 40), false)
                tiles.setWallAt(tiles.getTileLocation(36, 41), false)
                tiles.setWallAt(tiles.getTileLocation(36, 42), false)
                tiles.setWallAt(tiles.getTileLocation(36, 43), false)
            } else {
                story.printCharacterText("meow, meow, meow, fish, meow, meow, meow, fisherwoman, meow, meow, meow, dark candle, meow", "cat")
            }
        } else {
            talked_to_cat = true
            story.printCharacterText("meow, meow, meow, fish, meow, meow, meow, fisherwoman, meow, meow, meow, dark candle, meow", "cat")
        }
    }
})
controller.B.onEvent(ControllerButtonEvent.Pressed, function () {
    if (final_fight) {
    	
    } else {
        story.clearAllText()
    }
    if (dark_magic) {
        if (characterAnimations.matchesRule(mySprite, characterAnimations.rule(Predicate.FacingLeft))) {
            projectile = sprites.createProjectileFromSprite(img`
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . f f . . . . . . . 
                . . . . . . c a a c . . . . . . 
                . . . . . f a a a a f . . . . . 
                . . . . . f a a a a f . . . . . 
                . . . . . . c a a c . . . . . . 
                . . . . . . . f f . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                `, mySprite, -150, 0)
        } else if (characterAnimations.matchesRule(mySprite, characterAnimations.rule(Predicate.FacingRight))) {
            projectile = sprites.createProjectileFromSprite(img`
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . f f . . . . . . . 
                . . . . . . c a a c . . . . . . 
                . . . . . f a a a a f . . . . . 
                . . . . . f a a a a f . . . . . 
                . . . . . . c a a c . . . . . . 
                . . . . . . . f f . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                `, mySprite, 150, 0)
        }
    } else {
    	
    }
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.skynpc, function (sprite, otherSprite) {
    otherSprite.sayText("?", 2000, false)
    if (controller.A.isPressed()) {
        story.printCharacterText("how the heck did you get here?!?", "george")
        story.printCharacterText("how did YOU get here?", "Rose")
        story.printCharacterText("no idea, but that candle is seriously giving me the creeps. you can take it", "george")
    }
})
events.spriteEvent(SpriteKind.Player, SpriteKind.Quella, events.SpriteEvent.StartOverlapping, function (sprite, otherSprite) {
    info.changeLifeBy(-1)
})
events.spriteEvent(SpriteKind.Projectile, SpriteKind.Enemy, events.SpriteEvent.StartOverlapping, function (sprite, otherSprite) {
    sprites.destroy(otherSprite)
})
events.spriteEvent(SpriteKind.Player, SpriteKind.bubble, events.SpriteEvent.StartOverlapping, function (sprite, otherSprite) {
    sprites.destroy(otherSprite)
    bubble2 = true
    story.printCharacterText("I have the bubble crystal! now i can upgrade my wand and use bubble magic and swim.", "Rose")
})
events.spriteEvent(SpriteKind.bat, SpriteKind.Projectile, events.SpriteEvent.StartOverlapping, function (sprite, otherSprite) {
    sprites.destroy(sprite)
})
events.spriteEvent(SpriteKind.Projectile, SpriteKind.Quella, events.SpriteEvent.StartOverlapping, function (sprite, otherSprite) {
    sprites.destroy(sprite)
    for (let value of sprites.allOfKind(SpriteKind.Projectile)) {
        sprites.destroy(value)
    }
    sprites.changeDataNumberBy(mySprite3, "quella hp", -1)
    story.printCharacterText("OoF", "Quella")
    mySprite3.setVelocity(randint(-150, 150), randint(-150, 150))
    if (sprites.readDataNumber(otherSprite, "quella hp") < 1) {
        sprites.destroy(otherSprite, effects.spray, 1000)
        story.clearAllText()
        info.changeLifeBy(100)
        story.printCharacterText("I MAY BE GONE NOW BUT I NEVER DIE!!!", "Quella")
        story.printCharacterText("NOOOOOoooooooooooo...............", "Quella")
        ending()
    }
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.servantnpc, function (sprite, otherSprite) {
    otherSprite.sayText("Hello, Lady Rose", 500, false)
    if (controller.A.isPressed()) {
        if (Math.percentChance(25)) {
            story.printCharacterText("How is your day going, Lady Rose?", "servant")
        } else if (Math.percentChance(25)) {
            story.printCharacterText("Is there anything I can do for you, Lady Rose?", "servant")
        } else if (Math.percentChance(25)) {
            story.printCharacterText("You are making great progress, Lady Rose.", "servant")
        } else if (Math.percentChance(25)) {
            story.printCharacterText("I am overjoyed to see you, Lady Rose!", "servant")
        }
    }
})
events.tileEvent(SpriteKind.Player, assets.tile`myTile31`, events.TileEvent.StartOverlapping, function (sprite) {
    tiles.placeOnTile(sprite, tiles.getTileLocation(136, 48))
    info.changeLifeBy(-1)
})
function starting_diolouge () {
    game.showLongText("prologue", DialogLayout.Full)
    game.showLongText("You are Rose, a witch born in the kingdom of Sani. At the age of 4 Rose went to a school on dark magic. she wasn't good enough so she dropped out at the age of 11. Still determined to be a witch she moved to the kingdom of Trig to take up an apprenticeship. she stayed on a mountain sky island with her mentor for 5 years. while up there she learned how to fall from any height without getting hurt and to use a tad bit of fire magic. after that she went and hired some people to build her a castle. then she got some servants who volunteered to be servants. as she settled down in the castle she got to know her neighbors. they were kind of mean but what do you expect when your a weird dark witch who built a random castle and did summoning stuff. the townsfolk referred to her to that weird witch that lives in that castle. she grew enraged and wanted to prove herself to the people so she decided to summon ancient evil. she had to learn dark projectile magic, get two staff upgrades, and three dark candles. she heard rumors about a magic shop in the mini sky island cluster selling a spell book that had the dark projectile magic. so she set of on her journey to summon ancient evil...", DialogLayout.Full)
    game.showLongText("controls", DialogLayout.Full)
    game.showLongText("move with the arrow buttons. jump with up. press b to skip text while in dialogue. you have health and it regenerate every 6 seconds if it runs out you die and you have to start over (sorry). MOST IMPORTANTLY have fun cause I spent about a month", DialogLayout.Full)
}
spriteutils.onSpriteKindUpdateInterval(SpriteKind.Quella, 5000, function (sprite) {
    if (final_fight) {
        mySprite3.setVelocity(randint(-150, 150), randint(-150, 150))
    }
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.pot, function (sprite, otherSprite) {
    otherSprite.setKind(SpriteKind.misc)
    tiles.placeOnTile(mySprite, tiles.getTileLocation(89, 37))
    story.printCharacterText("MY ROSES!!!!!", "Rose")
    story.printCharacterText("WHO DID THIS!!! ):<", "Rose")
    story.printCharacterText("...", "Rose")
    story.printCharacterText("...", "Rose")
    story.printCharacterText("(I can sense they are still out there somewhere)", "Rose")
    spawn_roses()
    story.printCharacterText("(I sense " + roses_left + " more roses remining)", "Rose")
})
function spawn_map () {
    tiles.setCurrentTilemap(tilemap`level3`)
    tiles.placeOnRandomTile(mySprite, assets.tile`myTile7`)
    kitty_cat = sprites.create(img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . f f . . . . 
        . . . . . . . . . f f f f . . . 
        . . f . . . . f . f f f f f . . 
        . f 3 f . . f 3 f . f f f f f . 
        . f 3 f f f f 3 f . . f f f f f 
        f 1 1 1 1 1 1 1 1 f . . . f f f 
        f 1 f 1 1 1 1 f 1 f . . . f f f 
        f 1 f 1 f f 1 f 1 f f f f f f f 
        f 1 1 1 1 1 1 1 1 1 1 1 1 1 f f 
        f 1 1 1 1 1 1 f f f 1 1 1 1 f . 
        . f 1 1 1 1 1 f f f f 1 1 1 f . 
        . f 1 1 1 1 1 1 1 1 1 1 1 1 f . 
        . f 1 f 1 f f f f f f f 1 1 f . 
        . f 1 f 1 f . . . . . f 1 f . . 
        . f f f f f . . . . . f f f . . 
        `, SpriteKind.kitty)
    tiles.placeOnRandomTile(kitty_cat, assets.tile`myTile19`)
    tiles.setTileAt(kitty_cat.tilemapLocation(), assets.tile`transparency16`)
    for (let value12 of tiles.getTilesByType(assets.tile`myTile30`)) {
        bat2 = sprites.create(img`
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . f f . . . . . . f f . . 
            . . . f c c f . . . . f c c f . 
            . . . f c c f . f . f f c c f . 
            . . . f c c c f 1 f 1 c c c f . 
            . . . f c f f f f f f f f c f . 
            . . . f f . . . . . . . . f f . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            `, SpriteKind.bat)
        tiles.placeOnTile(bat2, value12)
        tiles.setTileAt(value12, assets.tile`transparency16`)
    }
    for (let value13 of tiles.getTilesByType(assets.tile`myTile34`)) {
        fish = sprites.create(img`
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . c b c f . 
            . . . . . . . . . f c c b f c . 
            b . . . b c c c b c f c b c c c 
            b c . c b c c c b c c c b 1 c 1 
            b c c c b c c c b c 1 c 1 f f c 
            b c . c b c c c b c c f f c c . 
            b . . . b c c c b 1 f c b c . . 
            . . . . . . . . . . c c . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            `, SpriteKind.Enemy)
        tiles.placeOnTile(fish, value13)
        tiles.setTileAt(value13, assets.tile`myTile1`)
        fish.setBounceOnWall(true)
        fish.setVelocity(0, randint(100, 200))
    }
    for (let value14 of tiles.getTilesByType(assets.tile`myTile37`)) {
        dark_magic_manuscript_seller = sprites.create(img`
            . . . . . . . f f f f f . . . . 
            . . . . . f f f f f . . f . . . 
            . . f f f f f f f . . . . . . . 
            . . . d d d f f f f f . . . . . 
            . . . f d f d d d d . . . . . . 
            . . . d d d d d d d . . . . . . 
            . . . . f f d d d . . . . . . . 
            . . . . . b b b c . . . . . . . 
            . . . . b b b c c c . . . . . . 
            e f e e f f e f f f e f e e f e 
            e f e e f e e f f e e f e e f e 
            e f e f f e e f f f e f f e f f 
            e e e e e e e e e e e e e e e e 
            f f f e e f e e f f e e f e f f 
            f f f e f f f e f e f e f e f e 
            f e f e f e f e f f f e f e f f 
            `, SpriteKind.dark_manuscript_seller)
        tiles.placeOnTile(dark_magic_manuscript_seller, value14)
        tiles.setTileAt(value14, assets.tile`transparency16`)
    }
    for (let value15 of tiles.getTilesByType(assets.tile`myTile20`)) {
        pot_sprite = sprites.create(img`
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ................
            ..ee.eeeee..ee..
            ..eee..eee.eee..
            ..eeee.ee..eee..
            ...eeee...eee...
            ...eeee..eeee...
            ...ee...eeeee...
            ....e.eeeeee....
            `, SpriteKind.pot)
        tiles.placeOnTile(pot_sprite, value15)
        tiles.setTileAt(value15, assets.tile`myTile6`)
    }
    for (let value16 of tiles.getTilesByType(assets.tile`myTile44`)) {
        npc_sprite = sprites.create(img`
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . 5 5 5 5 5 . . . . . 
            . . . . . 5 d d d d d . . . . . 
            . . . . . 5 d f d f d . 1 1 1 . 
            . . . . . d d d d d d . 1 1 1 . 
            . . . . . d d f f f d . e e e . 
            . . . . . c d d d d d . . e . . 
            . . . . . c 1 2 1 c . . . e . . 
            . . . . . c 1 2 1 c c c d e . . 
            . . . . . c c 2 c c . . . e . . 
            . . . . . f f f f f . . . e . . 
            . . . . . f . . . f . . . e . . 
            . . . . . f . . . f . . . e . . 
            `, SpriteKind.servantnpc)
        tiles.placeOnTile(npc_sprite, value16)
        tiles.setTileAt(value16, assets.tile`myTile6`)
    }
    for (let value17 of tiles.getTilesByType(assets.tile`myTile11`)) {
        candle_sprite = sprites.create(img`
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . f . . . . . . . . 
            . . . . . . f f f . . . . . . . 
            . . . . f f f f f f f . . . . . 
            . . . f f f f 5 f f f f . . . . 
            . . . f f f 4 4 4 f f f . . . . 
            . . . f f f 2 2 2 f f f . . . . 
            . . f f f f f e f f f f f . . . 
            . . f f f f d 1 1 f f f f . . . 
            . . f f f f d 1 1 f f f f . . . 
            . . . f f f 1 1 1 f f f . . . . 
            . . . f f f 1 1 1 f f f . . . . 
            `, SpriteKind.candle)
        tiles.placeOnTile(candle_sprite, value17)
        tiles.setTileAt(value17, assets.tile`transparency16`)
    }
    for (let value18 of tiles.getTilesByType(assets.tile`myTile43`)) {
        bubble_crystal = sprites.create(img`
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . 9 9 9 9 9 . . . . . . 
            . . . 6 6 6 9 9 9 9 9 9 . . . . 
            . . . 6 6 6 6 6 9 9 9 9 . . . . 
            . . 6 6 6 6 6 6 6 6 9 9 9 . . . 
            . . 6 6 6 6 6 6 6 6 6 6 9 . . . 
            . . 8 6 6 6 6 6 6 6 6 6 6 . . . 
            . . 8 8 8 6 6 6 6 6 6 6 6 . . . 
            . . 8 8 8 8 8 6 6 6 6 6 6 . . . 
            . . . 8 8 8 8 8 8 6 6 6 . . . . 
            . . . 8 8 8 8 8 8 8 8 6 . . . . 
            . . . . . 8 8 8 8 8 . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            `, SpriteKind.bubble)
        tiles.placeOnTile(bubble_crystal, value18)
        tiles.setTileAt(value18, assets.tile`myTile6`)
    }
    for (let value19 of tiles.getTilesByType(assets.tile`myTile46`)) {
        feather_ability_sprite = sprites.create(img`
            . f f f f . . . . . . . . . . . 
            f f f b 1 f f . . . . . . . . . 
            f f b b 1 b 1 f . . . . . . . . 
            f b b b 1 b 1 1 f . . . . . . . 
            f 1 1 1 d b 1 1 1 f . . . . . . 
            . f b b b d 1 1 1 1 f . . . . . 
            . f 1 1 1 1 d 1 1 1 1 f . . . . 
            . . f 1 1 1 1 d 1 1 1 1 f . . . 
            . . . f 1 1 1 1 d 1 1 1 f . . . 
            . . . . f 1 1 1 1 d 1 1 1 f . . 
            . . . . . f 1 1 1 1 d 1 1 f . . 
            . . . . . . f 1 1 1 1 d 1 f . . 
            . . . . . . . f f 1 1 1 d f . . 
            . . . . . . . . . f f f f d f . 
            . . . . . . . . . . . . . f d f 
            . . . . . . . . . . . . . . f f 
            `, SpriteKind.feather)
        tiles.placeOnTile(feather_ability_sprite, value19)
        tiles.setTileAt(value19, assets.tile`myTile1`)
    }
    for (let value20 of tiles.getTilesByType(assets.tile`myTile32`)) {
        mew_sprite = sprites.create(img`
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . f f . . . . . . . . . . . . . 
            f f f . . . . . f . . . . f . . 
            f f f f . . . f f . . . f f . . 
            . f f f . . f 1 f . . f 1 f . . 
            . . f f . f f f f f f f f f . . 
            . f f . f f f f f f f f f f f . 
            f f . f f f f f 1 f f f f 1 f f 
            f f f f f f f f 1 f f f f 1 f f 
            . f f f f f f f f f f f f f f f 
            . f f f f f f f f f f f f f f f 
            . . f f f f f f f f f f f f f . 
            . . . . f f f f f f f f f f . . 
            `, SpriteKind.mew)
        tiles.placeOnTile(mew_sprite, value20)
        tiles.setTileAt(value20, assets.tile`transparency16`)
    }
    npcs()
}
sprites.onOverlap(SpriteKind.Player, SpriteKind.generic_npc, function (sprite, otherSprite) {
    otherSprite.sayText("hi", 2000, false)
    if (controller.A.isPressed()) {
        if (otherSprite.image.equals(img`
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . e e e e e e . . . . . 
            . . . . . e e d d d e . . . . . 
            . . . . . d d f d f d . . . . . 
            . . . . . d d d d d d . . . . . 
            . . . . . d d f f f d . . . . . 
            . . . . . . d d d d . . . . . . 
            . . . . . 2 2 2 2 2 2 . . . . . 
            . . . . . 2 2 2 2 2 2 . . . . . 
            . . . . . d 2 2 2 2 d . . . . . 
            . . . . . . c c c c . . . . . . 
            . . . . . . c . . c . . . . . . 
            `)) {
            story.printCharacterText("You need to fly over the sand storm to get to the desert.", "Stephen")
        } else if (otherSprite.image.equals(img`
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . 5 5 5 5 . . . . . . 
            . . . . . 5 5 5 5 5 5 . . . . . 
            . . . . 5 5 d d d d d . . . . . 
            . . . 5 5 d d f d f d . . . . . 
            . . . 5 5 d d d d d d . . . . . 
            . . . 5 5 d d f f f d . . . . . 
            . . . 5 5 . d d d d . . . . . . 
            . . . . . 4 4 4 4 4 4 . . . . . 
            . . . . . 4 4 4 4 4 4 . . . . . 
            . . . . . d 4 4 4 4 d . . . . . 
            . . . . . . 6 6 6 6 . . . . . . 
            . . . . . . 6 . . 6 . . . . . . 
            `)) {
            story.printCharacterText("why are you in my house?", "Jen")
        } else if (otherSprite.image.equals(img`
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . 5 5 5 5 5 5 . . . . . 
            . . . . . 5 d d d d d . . . . . 
            . . . . . d d f d f d . . . . . 
            . . . . . d d d d d d . . . . . 
            . . . . . d d f f f d . . . . . 
            . . . . . . d d d d . . . . . . 
            . . . . . 8 8 8 8 8 8 . . . . . 
            . . . . . 8 8 8 8 8 8 . . . . . 
            . . . . . d 8 8 8 8 d . . . . . 
            . . . . . . e e e e . . . . . . 
            . . . . . . e . . e . . . . . . 
            `)) {
            story.printCharacterText("There used to be a shop here but then the developer decided it would be to much work so they left it out.", "Harold")
        } else if (otherSprite.image.equals(img`
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . f f f f f f . . . . . 
            . . . . f f e e e e e . . . . . 
            . . . . f e e f e f e . . . . . 
            . . . . f e e e e e e . . . . . 
            . . . . f e e f f f e . . . . . 
            . . . . . . e e e e . . . . . . 
            . . . . . 2 2 2 2 2 2 . . . . . 
            . . . . . 2 2 2 2 2 2 . . . . . 
            . . . . . e 2 2 2 2 e . . . . . 
            . . . . . . c c c c . . . . . . 
            . . . . . . c . . c . . . . . . 
            `)) {
            story.printCharacterText("this is a cool sky island. wonder how i got here...", "Sara")
        } else if (otherSprite.image.equals(img`
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . e e e e e e . . . . . 
            . . . . . 4 4 4 4 e e . . . . . 
            . . . . . 4 f 4 f 4 e . . . . . 
            . . . . . 4 4 4 4 4 4 . . . . . 
            . . . . . 4 f f f 4 4 . . . . . 
            . . . . . . 4 4 4 4 . . . . . . 
            . . . . . b b b b b b . . . . . 
            . . . . . b b b b b b . . . . . 
            . . . . . 4 b b b b 4 . . . . . 
            . . . . . . c c c c . . . . . . 
            . . . . . . c . . c . . . . . . 
            `)) {
            story.printCharacterText("Get out of my office, I'm trying to work on the sequel for this game. (also thanks for playing)", "Dev")
        } else if (otherSprite.image.equals(img`
            . . . . f . . . . . . . . . . . 
            . . . . f f f . . . . . . . . . 
            . . . . f f f f f . . . . . . . 
            . . . . . f f f f f f . . . . . 
            . . . . f f f f f f f f f . . . 
            . . f f f f f f 1 1 1 . . . . . 
            . f f f 1 1 1 d d d d . . . . . 
            . . . 1 1 d d f d f d . . . . . 
            . . . 1 1 d d b d b d e e e . . 
            . . . 1 1 d d f f f d e e e . . 
            . . f f f c d d d d . . e . . . 
            . . f c c c c c c c . . e . . . 
            . . . f f f c c c c . . e . . . 
            . . . . c c c d c c c d e . . . 
            . . . . c c c c c c . . e . . . 
            . . . c c c c c c c . . e . . . 
            `)) {
            story.printCharacterText("Hello student...", "Mentor")
            story.printCharacterText("Hello Mentor", "Rose")
            story.printCharacterText("how go's the stuffs", "Mentor")
            story.printCharacterText("fine enough", "Rose")
            story.printCharacterText("good", "Mentor")
        } else if (otherSprite.image.equals(img`
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . f . f . f . f . . . . 
            . . . . . f f f f f f . . . . . 
            . . . . . e e e e e e . . . . . 
            . . . . . e e f e f e . . . . . 
            . . . . . e e e e e e . . . . . 
            . . . . . e e f f f e . . . . . 
            . . . . . . e e e e . . . . . . 
            . . . . . 8 8 1 8 1 8 . . . . . 
            . . . . . 8 8 1 8 1 8 . . . . . 
            . . . . . e 8 8 8 8 e . . . . . 
            . . . . . . c c c c . . . . . . 
            . . . . . . c . . c . . . . . . 
            `)) {
            story.printCharacterText("I heard there was a weird candle on a sky island above us. i also heard that a cat was hoarding one and another was in a pyramid.", "Julian")
        } else if (otherSprite.image.equals(img`
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . e e e e e e . . . . . 
            . . . . . e e d d e e . . . . . 
            . . . . . d d f d f d . . . . . 
            . . . . . d d d d d d . . . . . 
            . . . . . d d f f f d . . . . . 
            . . . . . . d d d d . . . . . . 
            . . . . . 7 7 7 7 7 7 . . . . . 
            . . . . . 7 7 7 7 7 7 . . . . . 
            . . . . . d 7 7 7 7 d . . . . . 
            . . . . . . c c c c . . . . . . 
            . . . . . . c . . c . . . . . . 
            `)) {
            story.printCharacterText("I'm Jude. I got to this island because I'm a VIP (I'm not a VIP. I just got here because I'm based off of one of the developers friends)", "Jude")
        }
    } else {
    	
    }
})
events.spriteEvent(SpriteKind.Player, SpriteKind.mew, events.SpriteEvent.StartOverlapping, function (sprite, otherSprite) {
    mews += 1
    otherSprite.sayText("mew", 2000, false)
    pause(2000)
    otherSprite.sayText("bye", 2000, false)
    otherSprite.setVelocity(10, 0)
    pause(2000)
    otherSprite.setVelocity(300, -250)
    pause(1000)
    sprites.destroy(otherSprite)
})
events.spriteEvent(SpriteKind.Player, SpriteKind.rose, events.SpriteEvent.StartOverlapping, function (sprite, otherSprite) {
    roses_left += -1
    story.printCharacterText("I sense " + roses_left + " more roses remaining", "Rose")
    if (roses_left == 0) {
        story.printCharacterText(":)", "Rose")
        story.printCharacterText("I found them all!", "Rose")
        pot_sprite.setImage(img`
            ...ffffffffff...
            .ffffff22ff22ff.
            f2f222f2f22ff22f
            .ff2ffff22ff22f.
            .f2f2f2222f222f.
            .f2f22f222f222f.
            ..ff222f2f2f2f..
            ...ffffffffff...
            ....77777777....
            .....67.767.....
            ....67767.76....
            ....7..7...7....
            ....76676.67....
            ..67.67.76..76..
            ...7..7.7...7...
            ..eeeeeeeeeeee..
            ..eeeeeeeeeeee..
            ..eeeeeeeeeeee..
            ...eeeeeeeeee...
            ...eeeeeeeeee...
            ...eeeeeeeeee...
            ....eeeeeeee....
            `)
        story.printCharacterText("...", "Rose")
        story.printCharacterText("i heard there were some missing black cats. i should find them", "Rose")
        story.printCharacterText("(only because they're my favorite type and they're needed for 100%ing the game)", "Rose")
    } else {
    	
    }
    sprites.destroy(otherSprite)
})
info.onLifeZero(function () {
    game.splash("GAME OVER!", "(sorry, you have to start over)")
    game.reset()
})
events.wallEvent(SpriteKind.Projectile, events.simpleWallCondition(events.WallFlag.Any), events.WallEvent.StartHitting, function (sprite) {
    if (sprite.tileKindAt(TileDirection.Left, assets.tile`myTile29`)) {
        tiles.setWallAt(sprite.tilemapLocation().getNeighboringLocation(CollisionDirection.Left), false)
        tiles.setTileAt(sprite.tilemapLocation().getNeighboringLocation(CollisionDirection.Left), assets.tile`transparency16`)
    } else if (sprite.tileKindAt(TileDirection.Top, assets.tile`myTile29`)) {
        tiles.setWallAt(sprite.tilemapLocation().getNeighboringLocation(CollisionDirection.Top), false)
        tiles.setTileAt(sprite.tilemapLocation().getNeighboringLocation(CollisionDirection.Top), assets.tile`transparency16`)
    } else if (sprite.tileKindAt(TileDirection.Right, assets.tile`myTile29`)) {
        tiles.setWallAt(sprite.tilemapLocation().getNeighboringLocation(CollisionDirection.Right), false)
        tiles.setTileAt(sprite.tilemapLocation().getNeighboringLocation(CollisionDirection.Right), assets.tile`transparency16`)
    } else if (sprite.tileKindAt(TileDirection.Bottom, assets.tile`myTile29`)) {
        tiles.setWallAt(sprite.tilemapLocation().getNeighboringLocation(CollisionDirection.Bottom), false)
        tiles.setTileAt(sprite.tilemapLocation().getNeighboringLocation(CollisionDirection.Bottom), assets.tile`transparency16`)
    }
})
events.spriteEvent(SpriteKind.Player, SpriteKind.portal, events.SpriteEvent.StartOverlapping, function (sprite, otherSprite) {
    tiles.placeOnTile(mySprite, tiles.getTileLocation(91, 34))
    controller.moveSprite(mySprite, 0, 0)
    story.printCharacterText("Ahhh...", "Rose")
    story.printCharacterText("there it is, the complete dark chandelier", "Rose")
    story.printCharacterText(":)", "Rose")
    story.printCharacterText("...", "Rose")
    story.printCharacterText("it made the portal", "Rose")
    story.printCharacterText("I can go through", "Rose")
    story.printCharacterText("...", "Rose")
    mySprite.setVelocity(40, 0)
    pause(1000)
    mySprite.setVelocity(0, 0)
    story.printCharacterText("I might not come back...", "Rose")
    story.printCharacterText("do I really want to do this? do I have any unfinished business?", "Rose")
    if (game.ask("should I go through?")) {
        story.printCharacterText("I'm going through", "Rose")
        story.printCharacterText("...", "Rose")
        story.printCharacterText("its finally time to prove myself ", "Rose")
        story.printCharacterText("bye...", "Rose")
        color.startFade(color.originalPalette, color.Black, 1000)
        pause(100)
        mySprite.setVelocity(30, 0)
        pause(300)
        mySprite.setVelocity(-70, 0)
        mySprite.vy += -120
        pause(2000)
        color.startFade(color.Black, color.originalPalette, 1000)
        tiles.setCurrentTilemap(tilemap`level4`)
        for (let value9 of sprites.allOfKind(SpriteKind.coin)) {
            sprites.destroy(value9)
        }
        for (let value10 of sprites.allOfKind(SpriteKind.bat)) {
            sprites.destroy(value10)
        }
        for (let value11 of sprites.allOfKind(SpriteKind.Enemy)) {
            sprites.destroy(value11)
        }
        tiles.placeOnTile(mySprite, tiles.getTileLocation(0, 13))
        multilights.toggleLighting(true)
        multilights.addLightSource(mySprite, 17)
        mySprite2 = sprites.create(img`
            f f 5 f f f f 5 f f f f 5 f f f 
            f 4 4 4 f f 4 4 4 f f 4 4 4 f f 
            f 2 2 2 f f 2 2 2 f f 2 2 2 f f 
            f f e f f f f e f f f f e f f f 
            f d 1 1 f f d 1 1 f f d 1 1 f f 
            f d 1 1 f f d 1 1 f f d 1 1 f f 
            f 1 1 1 f f 1 1 1 f f 1 1 1 f f 
            f 1 1 1 f f 1 1 1 f f 1 1 1 f f 
            f b b b b b b b b b b b b b f f 
            f f b b b b b b b b b b b f f f 
            f f f f b b b b b b b f f f f f 
            f b b f f b b f b b f f b b f f 
            b f f b f b b b b b f b f f b f 
            b f f f f b b b b b f f f f b f 
            f b f f f b b b b b f f f b f f 
            f f b b b f b b b f b b b f f f 
            `, SpriteKind.chandelier)
        tiles.placeOnRandomTile(mySprite2, assets.tile`myTile24`)
        multilights.addLightSource(mySprite2, 24)
        mySprite.z = 10
        story.clearAllText()
        story.printCharacterText("AHHHhhhhh", "Rose")
        story.printCharacterText("...", "Rose")
        story.printCharacterText("oof...", "Rose")
        pause(500)
        mySprite.vy += -105
        pause(200)
        story.printCharacterText("YES!", "Rose")
        story.printCharacterText("its the dark dimension", "Rose")
        story.printCharacterText("no light whatsoever", "Rose")
        story.printCharacterText("glad I learned some fire magic back when I was an apprentice so I can see (not very well though)", "Rose")
        story.printCharacterText("???", "Rose")
        story.printCharacterText("what's that light up ahead?", "Rose")
        story.printCharacterText("(am I about to die?)", "Rose")
        controller.moveSprite(mySprite, 100, 0)
    } else {
        story.printCharacterText("not just yet...", "Rose")
        controller.moveSprite(mySprite, 100, 0)
    }
})
events.spriteEvent(SpriteKind.Player, SpriteKind.Enemy, events.SpriteEvent.StartOverlapping, function (sprite, otherSprite) {
    sprites.destroy(otherSprite)
    info.changeLifeBy(-1)
})
events.spriteEvent(SpriteKind.bat, SpriteKind.Player, events.SpriteEvent.StartOverlapping, function (sprite, otherSprite) {
    sprites.destroy(sprite)
    info.changeLifeBy(-1)
})
scene.onOverlapTile(SpriteKind.Player, assets.tile`myTile41`, function (sprite, location) {
    tiles.setTileAt(location, assets.tile`transparency16`)
    info.changeScoreBy(1)
})
events.spriteEvent(SpriteKind.Player, SpriteKind.candle, events.SpriteEvent.StartOverlapping, function (sprite, otherSprite) {
    sprites.destroy(otherSprite)
    dark_candles += 1
    if (dark_candles == 1) {
        story.printCharacterText("I finally have a dark candle! just two more to go. (I should check the second floor of the castle if i want to see it on the pedestal)", "Rose")
        tileUtil.replaceAllTiles(assets.tile`myTile14`, assets.tile`myTile16`)
    } else if (dark_candles == 2) {
        story.printCharacterText("I got another dark candle. just one more to go. (I should check the second floor of the castle if i want to see it on the pedestal)", "Rose")
        tileUtil.replaceAllTiles(assets.tile`myTile16`, assets.tile`myTile17`)
    } else if (dark_candles == 3) {
        tileUtil.replaceAllTiles(assets.tile`myTile17`, assets.tile`myTile18`)
        story.printCharacterText("I got the last dark candle! its been a long journey, but now i can summon ancient evil and prove myself! (I should go to the second floor of the castle now.)", "Rose")
        dark_portal = sprites.create(img`
            ..........22422..........
            .........22422...........
            ........22422............
            .......22422222222.......
            ......2242222222222......
            .....224244444442222.....
            ....22444222222244422....
            ...2224222222222224422...
            ...22242244444442242422..
            ...224224444444442242422.
            2..2242244444444422422422
            22.2242244455544422422242
            4222242244455544422422224
            2422242244455544422422.22
            2242242244444444422422..2
            .224242244444444422422...
            ..22424224444444224222...
            ...2244222222222224222...
            ....22444222222244422....
            .....222244444442422.....
            ......2222222222422......
            .......22222222422.......
            ............22422........
            ...........22422.........
            ..........22422..........
            `, SpriteKind.portal)
        tiles.placeOnTile(dark_portal, tiles.getTileLocation(92, 33))
        dark_portal.y += -4
    }
})
function npcs () {
    npc_sprite = sprites.create(img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        e e . . . . . . . . . . . . . . 
        . . e . . . . . . 5 5 5 5 . . . 
        . . . e . . . . 5 5 5 5 5 5 . . 
        . . . e . . . . d d d d d 5 5 . 
        . . . . e . . . d f d f d d 5 5 
        . . . . e . . . d d d d d d 5 5 
        . . . . e . . . d f f f d d 5 5 
        . . . . . e . . . d d d d . . . 
        . . . . . e d c c c c c c . . . 
        . . . . . e d c c c c c c . . . 
        . . . . . . . . . c c c c . . . 
        . . . . . . . . . c c c c . . . 
        . . . . . . . . . f . . f . . . 
        `, SpriteKind.fishernpc)
    tiles.placeOnTile(npc_sprite, tiles.getTileLocation(66, 42))
    npc_sprite = sprites.create(img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . e e e e e e . . . . . 
        . . . . . e d d d d d . . . . . 
        . . . . . d d f d f d . . . . . 
        . . . . . d d d d d d . . . . . 
        . . . . . d d f f f d . . . . . 
        . . . . . . d d d d . . . . . . 
        . . . . . c c c c c c . . . . . 
        . . . . . c c c c c c . . . . . 
        . . . . . d c c c c d . . . . . 
        . . . . . . f f f f . . . . . . 
        . . . . . . f . . f . . . . . . 
        `, SpriteKind.skynpc)
    tiles.placeOnTile(npc_sprite, tiles.getTileLocation(97, 3))
    npc_sprite = sprites.create(img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . e e e e e e . . . . . 
        . . . . . e e d d d e . . . . . 
        . . . . . d d f d f d . . . . . 
        . . . . . d d d d d d . . . . . 
        . . . . . d d f f f d . . . . . 
        . . . . . . d d d d . . . . . . 
        . . . . . 2 2 2 2 2 2 . . . . . 
        . . . . . 2 2 2 2 2 2 . . . . . 
        . . . . . d 2 2 2 2 d . . . . . 
        . . . . . . c c c c . . . . . . 
        . . . . . . c . . c . . . . . . 
        `, SpriteKind.generic_npc)
    tiles.placeOnTile(npc_sprite, tiles.getTileLocation(192, 42))
    for (let value2 of tiles.getTilesByType(assets.tile`myTile45`)) {
        npc_sprite = sprites.create(img`
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . 5 5 5 5 . . . . . . 
            . . . . . 5 5 5 5 5 5 . . . . . 
            . . . . 5 5 d d d d d . . . . . 
            . . . 5 5 d d f d f d . . . . . 
            . . . 5 5 d d d d d d . . . . . 
            . . . 5 5 d d f f f d . . . . . 
            . . . 5 5 . d d d d . . . . . . 
            . . . . . 4 4 4 4 4 4 . . . . . 
            . . . . . 4 4 4 4 4 4 . . . . . 
            . . . . . d 4 4 4 4 d . . . . . 
            . . . . . . 6 6 6 6 . . . . . . 
            . . . . . . 6 . . 6 . . . . . . 
            `, SpriteKind.generic_npc)
        tiles.placeOnTile(npc_sprite, value2)
        tiles.setTileAt(value2, assets.tile`myTile56`)
    }
    for (let value3 of tiles.getTilesByType(assets.tile`myTile47`)) {
        npc_sprite = sprites.create(img`
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . 5 5 5 5 5 5 . . . . . 
            . . . . . 5 d d d d d . . . . . 
            . . . . . d d f d f d . . . . . 
            . . . . . d d d d d d . . . . . 
            . . . . . d d f f f d . . . . . 
            . . . . . . d d d d . . . . . . 
            . . . . . 8 8 8 8 8 8 . . . . . 
            . . . . . 8 8 8 8 8 8 . . . . . 
            . . . . . d 8 8 8 8 d . . . . . 
            . . . . . . e e e e . . . . . . 
            . . . . . . e . . e . . . . . . 
            `, SpriteKind.generic_npc)
        tiles.placeOnTile(npc_sprite, value3)
        tiles.setTileAt(value3, assets.tile`transparency16`)
    }
    for (let value4 of tiles.getTilesByType(assets.tile`myTile48`)) {
        npc_sprite = sprites.create(img`
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . f f f f f f . . . . . 
            . . . . f f e e e e e . . . . . 
            . . . . f e e f e f e . . . . . 
            . . . . f e e e e e e . . . . . 
            . . . . f e e f f f e . . . . . 
            . . . . . . e e e e . . . . . . 
            . . . . . 2 2 2 2 2 2 . . . . . 
            . . . . . 2 2 2 2 2 2 . . . . . 
            . . . . . e 2 2 2 2 e . . . . . 
            . . . . . . c c c c . . . . . . 
            . . . . . . c . . c . . . . . . 
            `, SpriteKind.generic_npc)
        tiles.placeOnTile(npc_sprite, value4)
        tiles.setTileAt(value4, assets.tile`transparency16`)
    }
    for (let value5 of tiles.getTilesByType(assets.tile`myTile49`)) {
        npc_sprite = sprites.create(img`
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . e e e e e e . . . . . 
            . . . . . 4 4 4 4 e e . . . . . 
            . . . . . 4 f 4 f 4 e . . . . . 
            . . . . . 4 4 4 4 4 4 . . . . . 
            . . . . . 4 f f f 4 4 . . . . . 
            . . . . . . 4 4 4 4 . . . . . . 
            . . . . . b b b b b b . . . . . 
            . . . . . b b b b b b . . . . . 
            . . . . . 4 b b b b 4 . . . . . 
            . . . . . . c c c c . . . . . . 
            . . . . . . c . . c . . . . . . 
            `, SpriteKind.generic_npc)
        tiles.placeOnTile(npc_sprite, value5)
        tiles.setTileAt(value5, assets.tile`myTile54`)
    }
    for (let value6 of tiles.getTilesByType(assets.tile`myTile50`)) {
        npc_sprite = sprites.create(img`
            . . . . f . . . . . . . . . . . 
            . . . . f f f . . . . . . . . . 
            . . . . f f f f f . . . . . . . 
            . . . . . f f f f f f . . . . . 
            . . . . f f f f f f f f f . . . 
            . . f f f f f f 1 1 1 . . . . . 
            . f f f 1 1 1 d d d d . . . . . 
            . . . 1 1 d d f d f d . . . . . 
            . . . 1 1 d d b d b d e e e . . 
            . . . 1 1 d d f f f d e e e . . 
            . . f f f c d d d d . . e . . . 
            . . f c c c c c c c . . e . . . 
            . . . f f f c c c c . . e . . . 
            . . . . c c c d c c c d e . . . 
            . . . . c c c c c c . . e . . . 
            . . . c c c c c c c . . e . . . 
            `, SpriteKind.generic_npc)
        tiles.placeOnTile(npc_sprite, value6)
        tiles.setTileAt(value6, assets.tile`myTile56`)
    }
    for (let value7 of tiles.getTilesByType(assets.tile`myTile51`)) {
        npc_sprite = sprites.create(img`
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . f . f . f . f . . . . 
            . . . . . f f f f f f . . . . . 
            . . . . . e e e e e e . . . . . 
            . . . . . e e f e f e . . . . . 
            . . . . . e e e e e e . . . . . 
            . . . . . e e f f f e . . . . . 
            . . . . . . e e e e . . . . . . 
            . . . . . 8 8 1 8 1 8 . . . . . 
            . . . . . 8 8 1 8 1 8 . . . . . 
            . . . . . e 8 8 8 8 e . . . . . 
            . . . . . . c c c c . . . . . . 
            . . . . . . c . . c . . . . . . 
            `, SpriteKind.generic_npc)
        tiles.placeOnTile(npc_sprite, value7)
        tiles.setTileAt(value7, assets.tile`transparency16`)
    }
    for (let value8 of tiles.getTilesByType(assets.tile`myTile52`)) {
        npc_sprite = sprites.create(img`
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . e e e e e e . . . . . 
            . . . . . e e d d e e . . . . . 
            . . . . . d d f d f d . . . . . 
            . . . . . d d d d d d . . . . . 
            . . . . . d d f f f d . . . . . 
            . . . . . . d d d d . . . . . . 
            . . . . . 7 7 7 7 7 7 . . . . . 
            . . . . . 7 7 7 7 7 7 . . . . . 
            . . . . . d 7 7 7 7 d . . . . . 
            . . . . . . c c c c . . . . . . 
            . . . . . . c . . c . . . . . . 
            `, SpriteKind.generic_npc)
        tiles.placeOnTile(npc_sprite, value8)
        tiles.setTileAt(value8, assets.tile`transparency16`)
    }
}
sprites.onOverlap(SpriteKind.Player, SpriteKind.fishernpc, function (sprite, otherSprite) {
    otherSprite.sayText("nice weather for fishing!", 2000, false)
    if (controller.A.isPressed()) {
        if (talked_to_cat) {
            if (has_fish) {
                story.printCharacterText("you should take fishing as a hobby instead of dark magic", "fisherwoman")
            } else {
                story.printCharacterText("I need a fish", "Rose")
                story.printCharacterText("oh hey it's you the weird guy in the castle", "fisherwoman")
                story.printCharacterText("I said I need a FISH", "Rose")
                story.printCharacterText("for \"summoning\" purposes? what do you need the fish for", "fisherwoman")
                story.printCharacterText(">:(", "Rose")
                story.printCharacterText("a cat. I need a fish for a cat", "Rose")
                story.printCharacterText("ok take it.", "fisherwoman")
                has_fish = true
            }
        } else {
            story.printCharacterText("You need bubble magic to move through water or it won't be good for you.", "fisherwoman")
        }
    }
})
function spawn_roses () {
    roses_left = 4
    rose_sprite = sprites.create(img`
        . . . . . f f . f f . . . . . . 
        . . . f f 2 2 f f f f . . . . . 
        . . f 2 2 f 2 f 2 2 2 f . . . . 
        . . . f 2 2 f f f f 2 f . . . . 
        . . . f 2 2 2 2 f 2 f . . . . . 
        . . . f 2 2 2 f 2 2 f . . . . . 
        . . . . f 2 f 2 2 2 f . . . . . 
        . . . . . f f f f f . . . . . . 
        . . . . . . 7 7 7 . . . . . . . 
        . . . . . . . 7 6 . . . . . . . 
        . . . . . . 6 7 . . . . . . . . 
        . . . . . . 7 . . . . . . . . . 
        . . . . . . 7 6 . . . . . . . . 
        . . . . 6 7 . . . . . . . . . . 
        . . . . . 7 . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `, SpriteKind.rose)
    tiles.placeOnTile(rose_sprite, tiles.getTileLocation(129, 36))
    rose_sprite = sprites.create(img`
        . . . . . f f . f f . . . . . . 
        . . . f f 2 2 f f f f . . . . . 
        . . f 2 2 f 2 f 2 2 2 f . . . . 
        . . . f 2 2 f f f f 2 f . . . . 
        . . . f 2 2 2 2 f 2 f . . . . . 
        . . . f 2 2 2 f 2 2 f . . . . . 
        . . . . f 2 f 2 2 2 f . . . . . 
        . . . . . f f f f f . . . . . . 
        . . . . . . 7 7 7 . . . . . . . 
        . . . . . . . 7 6 . . . . . . . 
        . . . . . . 6 7 . . . . . . . . 
        . . . . . . 7 . . . . . . . . . 
        . . . . . . 7 6 . . . . . . . . 
        . . . . 6 7 . . . . . . . . . . 
        . . . . . 7 . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `, SpriteKind.rose)
    tiles.placeOnTile(rose_sprite, tiles.getTileLocation(75, 7))
    rose_sprite = sprites.create(img`
        . . . . . f f . f f . . . . . . 
        . . . f f 2 2 f f f f . . . . . 
        . . f 2 2 f 2 f 2 2 2 f . . . . 
        . . . f 2 2 f f f f 2 f . . . . 
        . . . f 2 2 2 2 f 2 f . . . . . 
        . . . f 2 2 2 f 2 2 f . . . . . 
        . . . . f 2 f 2 2 2 f . . . . . 
        . . . . . f f f f f . . . . . . 
        . . . . . . 7 7 7 . . . . . . . 
        . . . . . . . 7 6 . . . . . . . 
        . . . . . . 6 7 . . . . . . . . 
        . . . . . . 7 . . . . . . . . . 
        . . . . . . 7 6 . . . . . . . . 
        . . . . 6 7 . . . . . . . . . . 
        . . . . . 7 . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `, SpriteKind.rose)
    tiles.placeOnTile(rose_sprite, tiles.getTileLocation(108, 48))
    rose_sprite = sprites.create(img`
        . . . . . f f . f f . . . . . . 
        . . . f f 2 2 f f f f . . . . . 
        . . f 2 2 f 2 f 2 2 2 f . . . . 
        . . . f 2 2 f f f f 2 f . . . . 
        . . . f 2 2 2 2 f 2 f . . . . . 
        . . . f 2 2 2 f 2 2 f . . . . . 
        . . . . f 2 f 2 2 2 f . . . . . 
        . . . . . f f f f f . . . . . . 
        . . . . . . 7 7 7 . . . . . . . 
        . . . . . . . 7 6 . . . . . . . 
        . . . . . . 6 7 . . . . . . . . 
        . . . . . . 7 . . . . . . . . . 
        . . . . . . 7 6 . . . . . . . . 
        . . . . 6 7 . . . . . . . . . . 
        . . . . . 7 . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `, SpriteKind.rose)
    tiles.placeOnTile(rose_sprite, tiles.getTileLocation(1, 35))
}
events.spriteEvent(SpriteKind.Player, SpriteKind.feather, events.SpriteEvent.StartOverlapping, function (sprite, otherSprite) {
    sprites.destroy(otherSprite)
    flight = true
    story.printCharacterText("I have the magic feather! now i can upgrade my wand and use flight magic and fly by pressing UP multiple times.", "Rose")
    story.printCharacterText("I've fully upgraded my wand! now i need to find the 3 dark candles to put on the pedestal. (I have no idea where they would be but maybe if i *shudder* talk to some people i might get some info.)", "Rose")
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.dark_manuscript_seller, function (sprite, otherSprite) {
    otherSprite.sayText("I SELL MAGIC!", 2000, false)
    if (controller.A.isPressed()) {
        sprite.x += -4
        story.printCharacterText("Hey, your that weird witch living in the castle", "magic clerk")
        story.printCharacterText("KEITH!?!?! WHAT ARE YOU DOING HERE??? YOU KNOW NOTHING ABOUT MAGIC!!!", "Rose")
        otherSprite.setImage(img`
            . e e e e e e . . . . . . . . . 
            . . e e e e e e e . . . . . . . 
            . . . e e e f f f e . . . . . . 
            . . . f f f d d d e . . . . . . 
            . . . d f d d f d d . . . . . . 
            . d . d d d d d d f . . . . . . 
            . . b . d d f f f . . . . . . . 
            . . . b . 1 1 1 . . . . . . . . 
            . . . . b 1 f 1 b . . . . . . . 
            . . . . . 1 1 1 . b . . . . . . 
            . . . . . 1 f 1 . . b . . . . . 
            . . . . . 1 1 1 1 b . . . . . . 
            . . . . . 8 8 8 d 1 . . . . . . 
            . . . . . 8 1 8 1 1 1 . . . . . 
            . . . . . 8 1 8 1 1 1 1 . . . . 
            . . . . . 8 . 8 . . . . . . . . 
            `)
        story.printCharacterText("yup its me! the one, the only, the dashing, the smart, the movie sta-", "Keith")
        story.printCharacterText("SHUT UP!!!", "Rose")
        story.printCharacterText("Hey, hey, hey you don't have to get that personal to get state farm personal pri-", "Keith")
        story.printCharacterText("I SAID SHUT UP!!!", "Rose")
        story.printCharacterText(">:(", "Keith")
        story.printCharacterText("what are you even doing here", "Rose")
        story.printCharacterText("running a magic shop, and you?", "Keith")
        story.printCharacterText("I'm summoning stuff and looking for a spell book on how to cast dark energy magic.", "Rose")
        story.printCharacterText("I've got one right here, " + info.score() + " coins and its all yours.", "Keith")
        info.setScore(0)
        story.printCharacterText("*grumble* I'll take it. (would of preferred to get it from some where more local)", "Rose")
        story.printCharacterText("darn I'm all out of stock! cant stay here much longer. see ya!", "Keith")
        otherSprite.setVelocity(200, 200)
        pause(200)
        sprites.destroy(otherSprite)
        dark_magic = true
        story.printCharacterText("I have the dark manuscript! now i can shoot dark magic and i will damage enemies and clear away those weird dark dirt things.", "Rose")
    } else {
    	
    }
})
function ending () {
    if (roses_left == 0) {
        total += 4
    } else if (roses_left == 1) {
        total += 3
    } else if (roses_left == 2) {
        total += 2
    } else if (roses_left == 3) {
        total += 1
    } else {
        total += 0
    }
    total += dark_candles
    total += mews
    if (bubble2) {
        total += 1
    }
    if (flight) {
        total += 1
    }
    if (dark_magic) {
        total += 1
    }
    blockSettings.writeNumber("time", info.getTimeElapsed())
    blockSettings.writeNumber("total", total)
}
events.spriteEvent(SpriteKind.Player, SpriteKind.chandelier, events.SpriteEvent.StartOverlapping, function (sprite, otherSprite) {
    tiles.placeOnTile(mySprite, tiles.getTileLocation(11, 13))
    controller.moveSprite(mySprite, 0, 0)
    story.printCharacterText("HUh?", "Rose")
    story.printCharacterText("...", "Rose")
    story.printCharacterText("It's the chandelier...", "Rose")
    story.printCharacterText("I thought there was no light...", "Rose")
    story.printCharacterText("...", "Rose")
    story.printCharacterText("this is my only chance. I need to summon", "Rose")
    story.printCharacterText("...", "Rose")
    story.printCharacterText("dark evil lord, Quella rise from the dead and bring this miserable world to an end!", "Rose")
    mySprite.setVelocity(-40, 0)
    pause(1000)
    mySprite.setVelocity(0, 0)
    tiles.setTileAt(mySprite2.tilemapLocation(), assets.tile`myTile26`)
    sprites.destroy(mySprite2)
    pause(500)
    mySprite3 = sprites.create(img`
        ...............1................
        .............1111...............
        ...........1111111..............
        ..........111111111.............
        ........111111.11111..111.......
        ..........11....11111.1111......
        ..................111.11111.....
        ...........1......111..11111....
        .........1111.....111...11111...
        .......1111111....1111...1111...
        ......111111111...1111...1111...
        ....111111.11111..1111..11111...
        ......11....11111.1111.11111....
        ..............111.1111.1111.....
        .......1......111..11111111.....
        .....1111.....111111111111......
        ...1111111....111111111111......
        ..111111111...111111111111......
        111111.11111.1111111111111......
        ..11....111111111111111111......
        ..........111111111111111.......
        ..........111111111111111.......
        ...........11111111111111.......
        ............111111111111........
        ..............11111111111.......
        ................11.1111111......
        ....................1111111.....
        ......................1111111...
        .......................1111111..
        ........................1111111.
        ..........................111111
        ...........................11111
        ..........................111111
        ..........................11111.
        .........................11111..
        .........................11111..
        ........................11111...
        .......................111111...
        .......................11111....
        ......................11111.....
        ......................11111.....
        .....................11111......
        `, SpriteKind.Quella)
    tiles.placeOnTile(mySprite3, tiles.getTileLocation(10, 12))
    multilights.addLightSource(mySprite3, 20)
    pause(500)
    animation.runImageAnimation(
    mySprite3,
    [img`
        ...............1................
        .............1111...............
        ...........1111111..............
        ..........111111111.............
        ........111111.11111..111.......
        ..........11....11111.1111......
        ..................111.11111.....
        ...........1......111..11111....
        .........1111.....111...11111...
        .......1111111....1111...1111...
        ......111111111...1111...1111...
        ....111111.11111..1111..11111...
        ......11....11111.1111.11111....
        ..............111.1111.1111.....
        .......1......111..11111111.....
        .....1111.....111111111111......
        ...1111111....111111111111......
        ..111111111...111111111111......
        111111.11111.1111111111111......
        ..11....111111111111111111......
        ..........111111111111111.......
        ..........111111111111111.......
        ...........11111111111111.......
        ............111111111111........
        ..............11111111111.......
        ................11.1111111......
        ....................1111111.....
        ......................1111111...
        .......................1111111..
        ........................1111111.
        ..........................111111
        ...........................11111
        ..........................111111
        ..........................11111.
        .........................11111..
        .........................11111..
        ........................11111...
        .......................111111...
        .......................11111....
        ......................11111.....
        ......................11111.....
        .....................11111......
        `,img`
        ...............f................
        .............ffff...............
        ...........fffffff..............
        ..........fffffffff.............
        ........ffffff.fffff..ff1.......
        ..........ff....fffff.f111......
        ..................fff.11111.....
        ...........f......fff..11111....
        .........ffff.....ff1...11111...
        .......fffffff....f111...1111...
        ......fffffffff...1111...1111...
        ....ffffff.fffff..1111..11111...
        ......ff....fff11.1111.11111....
        ..............111.1111.1111.....
        .......f......111..11111111.....
        .....ffff.....111111111111......
        ...fffffff....111111111111......
        ..ffffffff1...111111111111......
        ffffff.ff111.1111111111111......
        ..ff....111111111111111111......
        ..........111111111111111.......
        ..........111111111111111.......
        ...........11111111111111.......
        ............111111111111........
        ..............11111111111.......
        ................11.1111111......
        ....................1111111.....
        ......................1111111...
        .......................1111111..
        ........................1111111.
        ..........................111111
        ...........................11111
        ..........................111111
        ..........................11111.
        .........................11111..
        .........................11111..
        ........................11111...
        .......................111111...
        .......................11111....
        ......................11111.....
        ......................11111.....
        .....................11111......
        `,img`
        ...............f................
        .............ffff...............
        ...........fffffff..............
        ..........fffffffff.............
        ........ffffff.fffff..fff.......
        ..........ff....fffff.ffff......
        ..................fff.fffff.....
        ...........f......fff..ffff1....
        .........ffff.....fff...ff111...
        .......fffffff....ffff...1111...
        ......fffffffff...ffff...1111...
        ....ffffff.fffff..ffff..11111...
        ......ff....fffff.ffff.11111....
        ..............fff.fff1.1111.....
        .......f......fff..f1111111.....
        .....ffff.....fffff1111111......
        ...fffffff....ffff11111111......
        ..fffffffff...fff111111111......
        ffffff.fffff.fff1111111111......
        ..ff....fffffff11111111111......
        ..........ffff11111111111.......
        ..........fff111111111111.......
        ...........f1111111111111.......
        ............111111111111........
        ..............11111111111.......
        ................11.1111111......
        ....................1111111.....
        ......................1111111...
        .......................1111111..
        ........................1111111.
        ..........................111111
        ...........................11111
        ..........................111111
        ..........................11111.
        .........................11111..
        .........................11111..
        ........................11111...
        .......................111111...
        .......................11111....
        ......................11111.....
        ......................11111.....
        .....................11111......
        `,img`
        ...............f................
        .............ffff...............
        ...........fffffff..............
        ..........fffffffff.............
        ........ffffff.fffff..fff.......
        ..........ff....fffff.ffff......
        ..................fff.fffff.....
        ...........f......fff..fffff....
        .........ffff.....fff...fffff...
        .......fffffff....ffff...ffff...
        ......fffffffff...ffff...ffff...
        ....ffffff.fffff..ffff..fffff...
        ......ff....fffff.ffff.fffff....
        ..............fff.ffff.ffff.....
        .......f......fff..ffffffff.....
        .....ffff.....ffffffffffff......
        ...fffffff....fffffffffff1......
        ..fffffffff...ffffffffff11......
        ffffff.fffff.ffffffffff111......
        ..ff....ffffffffffffff1111......
        ..........fffffffffff1111.......
        ..........ffffffffff11111.......
        ...........ffffffff111111.......
        ............ffffff111111........
        ..............fff11111111.......
        ................11.1111111......
        ....................1111111.....
        ......................1111111...
        .......................1111111..
        ........................1111111.
        ..........................111111
        ...........................11111
        ..........................111111
        ..........................11111.
        .........................11111..
        .........................11111..
        ........................11111...
        .......................111111...
        .......................11111....
        ......................11111.....
        ......................11111.....
        .....................11111......
        `,img`
        ...............f................
        .............ffff...............
        ...........fffffff..............
        ..........fffffffff.............
        ........ffffff.fffff..fff.......
        ..........ff....fffff.ffff......
        ..................fff.fffff.....
        ...........f......fff..fffff....
        .........ffff.....fff...fffff...
        .......fffffff....ffff...ffff...
        ......fffffffff...ffff...ffff...
        ....ffffff.fffff..ffff..fffff...
        ......ff....fffff.ffff.fffff....
        ..............fff.ffff.ffff.....
        .......f......fff..ffffffff.....
        .....ffff.....ffffffffffff......
        ...fffffff....ffffffffffff......
        ..fffffffff...ffffffffffff......
        ffffff.fffff.fffffffffffff......
        ..ff....ffffffffffffffffff......
        ..........fffffffffffffff.......
        ..........fffffffffffffff.......
        ...........ffffffffffffff.......
        ............ffffffffffff........
        ..............fffffffffff.......
        ................ff.fffffff......
        ....................fffff11.....
        ......................ff11111...
        .......................1111111..
        ........................1111111.
        ..........................111111
        ...........................11111
        ..........................111111
        ..........................11111.
        .........................11111..
        .........................11111..
        ........................11111...
        .......................111111...
        .......................11111....
        ......................11111.....
        ......................11111.....
        .....................11111......
        `,img`
        ...............f................
        .............ffff...............
        ...........fffffff..............
        ..........fffffffff.............
        ........ffffff.fffff..fff.......
        ..........ff....fffff.ffff......
        ..................fff.fffff.....
        ...........f......fff..fffff....
        .........ffff.....fff...fffff...
        .......fffffff....ffff...ffff...
        ......fffffffff...ffff...ffff...
        ....ffffff.fffff..ffff..fffff...
        ......ff....fffff.ffff.fffff....
        ..............fff.ffff.ffff.....
        .......f......fff..ffffffff.....
        .....ffff.....ffffffffffff......
        ...fffffff....ffffffffffff......
        ..fffffffff...ffffffffffff......
        ffffff.fffff.fffffffffffff......
        ..ff....ffffffffffffffffff......
        ..........fffffffffffffff.......
        ..........fffffffffffffff.......
        ...........ffffffffffffff.......
        ............ffffffffffff........
        ..............fffffffffff.......
        ................ff.fffffff......
        ....................fffffff.....
        ......................fffffff...
        .......................fffffff..
        ........................fffffff.
        ..........................ffffff
        ...........................ffff1
        ..........................ffff11
        ..........................fff11.
        .........................fff11..
        .........................ff111..
        ........................ff111...
        .......................ff1111...
        .......................f1111....
        ......................f1111.....
        ......................11111.....
        .....................11111......
        `,img`
        ...............f................
        .............ffff...............
        ...........fffffff..............
        ..........fffffffff.............
        ........ffffff.fffff..fff.......
        ..........ff....fffff.ffff......
        ..................fff.fffff.....
        ...........f......fff..fffff....
        .........ffff.....fff...fffff...
        .......fffffff....ffff...ffff...
        ......fffffffff...ffff...ffff...
        ....ffffff.fffff..ffff..fffff...
        ......ff....fffff.ffff.fffff....
        ..............fff.ffff.ffff.....
        .......f......fff..ffffffff.....
        .....ffff.....ffffffffffff......
        ...fffffff....ffffffffffff......
        ..fffffffff...ffffffffffff......
        ffffff.fffff.fffffffffffff......
        ..ff....ffffffffffffffffff......
        ..........fffffffffffffff.......
        ..........fffffffffffffff.......
        ...........ffffffffffffff.......
        ............ffffffffffff........
        ..............fffffffffff.......
        ................ff.fffffff......
        ....................fffffff.....
        ......................fffffff...
        .......................fffffff..
        ........................fffffff.
        ..........................ffffff
        ...........................fffff
        ..........................ffffff
        ..........................fffff.
        .........................fffff..
        .........................fffff..
        ........................fffff...
        .......................ffffff...
        .......................fffff....
        ......................fffff.....
        ......................fffff.....
        .....................fffff......
        `,img`
        ...............c................
        .............ffff...............
        ...........ccffffc..............
        ..........fffffffff.............
        ........ccffcc.cfffc..fff.......
        ..........ff....fffff.fffc......
        ..................cff.fffff.....
        ...........f......cff..cfffc....
        .........ccfc.....cff...fffff...
        .......fffffff....cffc...cfff...
        ......cfffcfffc...cffc...cfff...
        ....ffffff.fffff..cffc..fffff...
        ......cc....ccffc.cffc.cfffc....
        ..............ffc.cffc.cfff.....
        .......c......ffc..ffffffff.....
        .....ffff.....ffcccffffffc......
        ...ccffffc....fffffffffffc......
        ..fffffffff...fffffffffffc......
        ccffcc.cfffc.cfffffffffffc......
        ..ff....fffffffffffffffffc......
        ..........cffffffffffffff.......
        ..........cffffffffffffff.......
        ...........ffffffffffffff.......
        ............ccfffffffffc........
        ..............fffffffffff.......
        ................cc.cfffffc......
        ....................fffffff.....
        ......................cffffcc...
        .......................fffffff..
        ........................ccffffc.
        ..........................ffffff
        ...........................fffff
        ..........................cfffff
        ..........................cfffc.
        .........................fffff..
        .........................fffff..
        ........................cfffc...
        .......................fffffc...
        .......................fffff....
        ......................cfffc.....
        ......................cfffc.....
        .....................fffff......
        `],
    200,
    false
    )
    pause(1600)
    pause(200)
    multilights.bandWidthOf(mySprite3, 15)
    pause(500)
    multilights.bandWidthOf(mySprite3, 10)
    pause(500)
    multilights.bandWidthOf(mySprite3, 5)
    pause(500)
    multilights.removeLightSource(mySprite3)
    pause(1000)
    scene.cameraShake(4, 1000)
    story.printCharacterText("WHO HAS AWAKENED ME???", "Quella")
    story.printCharacterText("I have, lord Quella. I am called Rose.", "Rose")
    scene.cameraShake(4, 1000)
    story.printCharacterText("HELLO ROSE. YOU SHOULD KNOW WHAT I DO. WHAT SHOULD I KILL?", "Quella")
    story.printCharacterText("kill?", "Rose")
    scene.cameraShake(4, 1000)
    story.printCharacterText("YES KILL!!! THAT IS WHAT I DO", "Quella")
    story.printCharacterText("well... you know its just i was going to summon you to prove myself to the public and...", "Rose")
    scene.cameraShake(8, 1000)
    story.printCharacterText("YOU SUMMONED ME FOR NOTHING!?!", "Quella")
    story.printCharacterText("well...", "Rose")
    animation.runImageAnimation(
    mySprite3,
    [img`
        ...............c................
        .............ffff...............
        ...........ccffffc..............
        ..........fffffffff.............
        ........ccffcc.cfffc..fff.......
        ..........ff....fffff.fffc......
        ..................cff.fffff.....
        ...........f......cff..cfffc....
        .........ccfc.....cff...fffff...
        .......fffffff....cffc...cfff...
        ......cfffcfffc...cffc...cfff...
        ....ffffff.fffff..cffc..fffff...
        ......cc....ccffc.cffc.cfffc....
        ..............ffc.cffc.cfff.....
        .......c......ffc..ffffffff.....
        .....ffff.....ffcccffffffc......
        ...ccffffc....fffffffffffc......
        ..fffffffff...fffffffffffc......
        ccffcc.cfffc.cfffffffffffc......
        ..ff....fffffffffffffffffc......
        ..........cffffffffffffff.......
        ..........cffffffffffffff.......
        ...........ffffffffffffff.......
        ............ccfffffffffc........
        ..............fffffffffff.......
        ................cc.cfffffc......
        ....................fffffff.....
        ......................cffffcc...
        .......................fffffff..
        ........................ccffffc.
        ..........................ffffff
        ...........................fffff
        ..........................cfffff
        ..........................cfffc.
        .........................fffff..
        .........................fffff..
        ........................cfffc...
        .......................fffffc...
        .......................fffff....
        ......................cfffc.....
        ......................cfffc.....
        .....................fffff......
        `,img`
        ................................
        ...............c................
        .............ffff...............
        ...........ccffffc..............
        ..........fffffffff.............
        ........ccffcc.cfffc..fff.......
        ..........ff....fffff.fffc......
        ..................cff.fffff.....
        ...........f......cff..cfffc....
        .........ccfc.....cffc..fffff...
        .......fffffffc...cffc...cfff...
        ......cfffcfffff..cffc..fffff...
        ....ffffff.fffffc.cffc.cfffc....
        ......cc....ccffc.cffc.cfff.....
        ..............ffc..ffffffff.....
        .......cf.....ffcccffffffc......
        .....ffffc....fffffffffffc......
        ...ccffffff...fffffffffffc......
        ..fffffffffc.cfffffffffffc......
        ccffcc.cfffffffffffffffffc......
        ..ff......cffffffffffffff.......
        ..........cffffffffffffff.......
        ...........ffffffffffffff.......
        ............ccfffffffffc........
        ..............fffffffffff.......
        ................cc.cfffffc......
        ....................fffffff.....
        ......................cffffcc...
        .......................fffffff..
        ........................ccffffc.
        ..........................ffffff
        ...........................fffff
        ..........................cfffff
        ..........................cfffc.
        .........................fffff..
        .........................fffff..
        ........................cfffc...
        .......................fffffc...
        .......................fffff....
        ......................cfffc.....
        ......................cfffc.....
        .....................fffff......
        `,img`
        ................................
        ................................
        ..................c.............
        ................ffff............
        ..............ccffffc...........
        .............ffffffff...........
        ...........ccffcc.cff.fff.......
        .............ff...cff.fffc......
        ...........f......cff.fffff.....
        ..........ccc.....cffc.cfffc....
        ........ffffffc...cffc..fffff...
        .......cfffcffff..cffc..fcfff...
        .....fffffffffffc.cffc.cfffc....
        .......cc...ccffc.cffc.cfff.....
        ..............ffc..ffffffff.....
        .......cf.....ffcccffffffc......
        ......fffc....fffffffffffc......
        ......fffff...fffffffffffc......
        ....ccfffffc.cfffffffffffc......
        ...ffffcfffffffffffffffffc......
        .ccffcc...cffffffffffffff.......
        ...ff.....cffffffffffffff.......
        ...........ffffffffffffff.......
        ............ccfffffffffc........
        ..............fffffffffff.......
        ................cc.cfffffc......
        ....................fffffff.....
        ......................cffffcc...
        .......................fffffff..
        ........................ccffffc.
        ..........................ffffff
        ...........................fffff
        ..........................cfffff
        ..........................cfffc.
        .........................fffff..
        .........................fffff..
        ........................cfffc...
        .......................fffffc...
        .......................fffff....
        ......................cfffc.....
        ......................cfffc.....
        .....................fffff......
        `,img`
        ................................
        ................................
        ..................c.............
        .................fff............
        ...............ccfffc...........
        ..............fffffff...........
        ............ccffcccff...........
        ..............ff..cff..fff......
        ..................cff..fffc.....
        ............f.....cffc.fffff....
        ...........cccc...cffc..cfffc...
        .........fffffff..cffc..fcfff...
        ........cfffcfffc.cffc.cfffc....
        ......ffffffffffc.cffc.cfff.....
        ........cc...cffc..ffffffff.....
        ..............ffcccffffffc......
        ........c.....fffffffffffc......
        .......ffcf...fffffffffffc......
        .....ccffffc.cfffffffffffc......
        ....ffffcffffffffffffffffc......
        ..ccffcc..cffffffffffffff.......
        ....ff....cffffffffffffff.......
        ...........ffffffffffffff.......
        ............ccfffffffffc........
        ..............fffffffffff.......
        ................cc.cfffffc......
        ....................fffffff.....
        ......................cffffcc...
        .......................fffffff..
        ........................ccffffc.
        ..........................ffffff
        ...........................fffff
        ..........................cfffff
        ..........................cfffc.
        .........................fffff..
        .........................fffff..
        ........................cfffc...
        .......................fffffc...
        .......................fffff....
        ......................cfffc.....
        ......................cfffc.....
        .....................fffff......
        `,img`
        ................................
        ................................
        ..................c.............
        .................fff............
        ...............ccfffc...........
        ..............fffffff...........
        ...........1ccffcccff.1.........
        ..............ff..cff..fff......
        ..................cff..fffc.....
        ............f.....cffc.fffff....
        ...........cccc...cffc..cfffc...
        .........fffffff..cffc..fcfff...
        ........cfffcfffc.cffc.cfffc....
        .....1ffffffffffc.cffc.cfff.....
        ........cc...cffc..ffffffff.....
        ..............ffcccffffffc......
        ........c.....fffffffffffc......
        .......ffcf...fffffffffffc......
        .....ccffffc.cfffffffffffc......
        ....ffffcffffffffffffffffc......
        .1ccffcc..cffffffffffffff.......
        ....ff....cffffffffffffff.......
        ...........ffffffffffffff.......
        ............ccfffffffffc........
        ..............fffffffffff.......
        ................cc.cfffffc......
        ....................fffffff.....
        ......................cffffcc...
        .......................fffffff..
        ........................ccffffc.
        ..........................ffffff
        ...........................fffff
        ..........................cfffff
        ..........................cfffc.
        .........................fffff..
        .........................fffff..
        ........................cfffc...
        .......................fffffc...
        .......................fffff....
        ......................cfffc.....
        ......................cfffc.....
        .....................fffff......
        `,img`
        ................................
        ................................
        ..................c.............
        .................fff............
        ...............ccfffc...........
        ...........1..fffffff.1.........
        ..........111cffcccff111........
        ...........1..ff..cff.1fff......
        ..................cff..fffc.....
        ............f.....cffc.fffff....
        ...........cccc...cffc..cfffc...
        .........fffffff..cffc..fcfff...
        .....1..cfffcfffc.cffc.cfffc....
        ....111fffffffffc.cffc.cfff.....
        .....1..cc...cffc..ffffffff.....
        ..............ffcccffffffc......
        ........c.....fffffffffffc......
        .......ffcf...fffffffffffc......
        .....ccffffc.cfffffffffffc......
        .1..ffffcffffffffffffffffc......
        111cffcc..cffffffffffffff.......
        .1..ff....cffffffffffffff.......
        ...........ffffffffffffff.......
        ............ccfffffffffc........
        ..............fffffffffff.......
        ................cc.cfffffc......
        ....................fffffff.....
        ......................cffffcc...
        .......................fffffff..
        ........................ccffffc.
        ..........................ffffff
        ...........................fffff
        ..........................cfffff
        ..........................cfffc.
        .........................fffff..
        .........................fffff..
        ........................cfffc...
        .......................fffffc...
        .......................fffff....
        ......................cfffc.....
        ......................cfffc.....
        .....................fffff......
        `,img`
        ................................
        ................................
        ..................c.............
        .................fff............
        ...............ccfffc...........
        ...........1..fffffff.1.........
        ..........111cffcccff111........
        ...........1..ff..cff.1fff......
        ..................cff..fffc.....
        ............f.....cffc.fffff....
        ...........cccc...cffc..cfffc...
        .........fffffff..cffc..fcfff...
        .....1..cfffcfffc.cffc.cfffc....
        ....111fffffffffc.cffc.cfff.....
        .....1..cc...cffc..ffffffff.....
        ..............ffcccffffffc......
        ........c.....fffffffffffc......
        .......ffcf...fffffffffffc......
        .....ccffffc.cfffffffffffc......
        .1..ffffcffffffffffffffffc......
        111cffcc..cffffffffffffff.......
        .1..ff....cffffffffffffff.......
        ...........ffffffffffffff.......
        ............ccfffffffffc........
        ..............fffffffffff.......
        ................cc.cfffffc......
        ....................fffffff.....
        ......................cffffcc...
        .......................fffffff..
        ........................ccffffc.
        ..........................ffffff
        ...........................fffff
        ..........................cfffff
        ..........................cfffc.
        .........................fffff..
        .........................fffff..
        ........................cfffc...
        .......................fffffc...
        .......................fffff....
        ......................cfffc.....
        ......................cfffc.....
        .....................fffff......
        `,img`
        ................................
        ................................
        ..................c.............
        .................fff............
        ...............ccfffc...........
        ...........1..fffffff.1.........
        ..........111cffcccff111........
        ...........1..ff..cff.1fff......
        ..................cff..fffc.....
        ............f.....cffc.fffff....
        ...........cccc...cffc..cfffc...
        .........fffffff..cffc..fcfff...
        .....1..cfffcfffc.cffc.cfffc....
        ....111fffffffffc.cffc.cfff.....
        .....1..cc...cffc..ffffffff.....
        ..............ffcccffffffc......
        ........c.....fffffffffffc......
        .......ffcf...fffffffffffc......
        .....ccffffc.cfffffffffffc......
        .1..ffffcffffffffffffffffc......
        111cffcc..cffffffffffffff.......
        .1..ff....cffffffffffffff.......
        ...........ffffffffffffff.......
        ............ccfffffffffc........
        ..............fffffffffff.......
        ................cc.cfffffc......
        ....................fffffff.....
        ......................cffffcc...
        .......................fffffff..
        ........................ccffffc.
        ..........................ffffff
        ...........................fffff
        ..........................cfffff
        ..........................cfffc.
        .........................fffff..
        .........................fffff..
        ........................cfffc...
        .......................fffffc...
        .......................fffff....
        ......................cfffc.....
        ......................cfffc.....
        .....................fffff......
        `,img`
        ................................
        ................................
        ..................c.............
        .................fff............
        ...............ccfffc...........
        ..............fffffff...........
        ...........1ccffcccff.1.........
        ..............ff..cff..fff......
        ..................cff..fffc.....
        ............f.....cffc.fffff....
        ...........cccc...cffc..cfffc...
        .........fffffff..cffc..fcfff...
        ........cfffcfffc.cffc.cfffc....
        .....1ffffffffffc.cffc.cfff.....
        ........cc...cffc..ffffffff.....
        ..............ffcccffffffc......
        ........c.....fffffffffffc......
        .......ffcf...fffffffffffc......
        .....ccffffc.cfffffffffffc......
        ....ffffcffffffffffffffffc......
        .1ccffcc..cffffffffffffff.......
        ....ff....cffffffffffffff.......
        ...........ffffffffffffff.......
        ............ccfffffffffc........
        ..............fffffffffff.......
        ................cc.cfffffc......
        ....................fffffff.....
        ......................cffffcc...
        .......................fffffff..
        ........................ccffffc.
        ..........................ffffff
        ...........................fffff
        ..........................cfffff
        ..........................cfffc.
        .........................fffff..
        .........................fffff..
        ........................cfffc...
        .......................fffffc...
        .......................fffff....
        ......................cfffc.....
        ......................cfffc.....
        .....................fffff......
        `,img`
        ................................
        ...............c................
        .............ffff...............
        ...........ccffffc..............
        ..........fffffffff.............
        ........ccffcc.cfffc..fff.......
        ..........ff....fffff.fffc......
        ..................cff.fffff.....
        ...........f......cff..cfffc....
        .........ccfc.....cffc..fffff...
        .......fffffffc...cffc...cfff...
        ......cfffcfffff..cffc..fffff...
        ....ffffff.fffffc.cffc.cfffc....
        ......cc....ccffc.cffc.cfff.....
        ..............ffc..ffffffff.....
        .......cf.....ffcccffffffc......
        .....ffffc....fffffffffffc......
        ...ccffffff...fffffffffffc......
        ..fffffffffc.cfffffffffffc......
        ccffcc.cfffffffffffffffffc......
        ..ff......cffffffffffffff.......
        ..........cffffffffffffff.......
        ...........ffffffffffffff.......
        ............ccfffffffffc........
        ..............fffffffffff.......
        ................cc.cfffffc......
        ....................fffffff.....
        ......................cffffcc...
        .......................fffffff..
        ........................ccffffc.
        ..........................ffffff
        ...........................fffff
        ..........................cfffff
        ..........................cfffc.
        .........................fffff..
        .........................fffff..
        ........................cfffc...
        .......................fffffc...
        .......................fffff....
        ......................cfffc.....
        ......................cfffc.....
        .....................fffff......
        `,img`
        ................................
        ................................
        ..................c.............
        .................fff............
        ...............ccfffc...........
        ..............fffffff...........
        ............ccffcccff...........
        ..............ff..cff..fff......
        ..................cff..fffc.....
        ............f.....cffc.fffff....
        ...........cccc...cffc..cfffc...
        .........fffffff..cffc..fcfff...
        ........cfffcfffc.cffc.cfffc....
        ......ffffffffffc.cffc.cfff.....
        ........cc...cffc..ffffffff.....
        ..............ffcccffffffc......
        ........c.....fffffffffffc......
        .......ffcf...fffffffffffc......
        .....ccffffc.cfffffffffffc......
        ....ffffcffffffffffffffffc......
        ..ccffcc..cffffffffffffff.......
        ....ff....cffffffffffffff.......
        ...........ffffffffffffff.......
        ............ccfffffffffc........
        ..............fffffffffff.......
        ................cc.cfffffc......
        ....................fffffff.....
        ......................cffffcc...
        .......................fffffff..
        ........................ccffffc.
        ..........................ffffff
        ...........................fffff
        ..........................cfffff
        ..........................cfffc.
        .........................fffff..
        .........................fffff..
        ........................cfffc...
        .......................fffffc...
        .......................fffff....
        ......................cfffc.....
        ......................cfffc.....
        .....................fffff......
        `,img`
        ................................
        ................................
        ..................c.............
        ................ffff............
        ..............ccffffc...........
        .............ffffffff...........
        ...........ccffcc.cff.fff.......
        .............ff...cff.fffc......
        ...........f......cff.fffff.....
        ..........ccc.....cffc.cfffc....
        ........ffffffc...cffc..fffff...
        .......cfffcffff..cffc..fcfff...
        .....fffffffffffc.cffc.cfffc....
        .......cc...ccffc.cffc.cfff.....
        ..............ffc..ffffffff.....
        .......cf.....ffcccffffffc......
        ......fffc....fffffffffffc......
        ......fffff...fffffffffffc......
        ....ccfffffc.cfffffffffffc......
        ...ffffcfffffffffffffffffc......
        .ccffcc...cffffffffffffff.......
        ...ff.....cffffffffffffff.......
        ...........ffffffffffffff.......
        ............ccfffffffffc........
        ..............fffffffffff.......
        ................cc.cfffffc......
        ....................fffffff.....
        ......................cffffcc...
        .......................fffffff..
        ........................ccffffc.
        ..........................ffffff
        ...........................fffff
        ..........................cfffff
        ..........................cfffc.
        .........................fffff..
        .........................fffff..
        ........................cfffc...
        .......................fffffc...
        .......................fffff....
        ......................cfffc.....
        ......................cfffc.....
        .....................fffff......
        `,img`
        ................................
        ...............c................
        .............ffff...............
        ...........ccffffc..............
        ..........fffffffff.............
        ........ccffcc.cfffc..fff.......
        ..........ff....fffff.fffc......
        ..................cff.fffff.....
        ...........f......cff..cfffc....
        .........ccfc.....cffc..fffff...
        .......fffffffc...cffc...cfff...
        ......cfffcfffff..cffc..fffff...
        ....ffffff.fffffc.cffc.cfffc....
        ......cc....ccffc.cffc.cfff.....
        ..............ffc..ffffffff.....
        .......cf.....ffcccffffffc......
        .....ffffc....fffffffffffc......
        ...ccffffff...fffffffffffc......
        ..fffffffffc.cfffffffffffc......
        ccffcc.cfffffffffffffffffc......
        ..ff......cffffffffffffff.......
        ..........cffffffffffffff.......
        ...........ffffffffffffff.......
        ............ccfffffffffc........
        ..............fffffffffff.......
        ................cc.cfffffc......
        ....................fffffff.....
        ......................cffffcc...
        .......................fffffff..
        ........................ccffffc.
        ..........................ffffff
        ...........................fffff
        ..........................cfffff
        ..........................cfffc.
        .........................fffff..
        .........................fffff..
        ........................cfffc...
        .......................fffffc...
        .......................fffff....
        ......................cfffc.....
        ......................cfffc.....
        .....................fffff......
        `,img`
        ...............c................
        .............ffff...............
        ...........ccffffc..............
        ..........fffffffff.............
        ........ccffcc.cfffc..fff.......
        ..........ff....fffff.fffc......
        ..................cff.fffff.....
        ...........f......cff..cfffc....
        .........ccfc.....cff...fffff...
        .......fffffff....cffc...cfff...
        ......cfffcfffc...cffc...cfff...
        ....ffffff.fffff..cffc..fffff...
        ......cc....ccffc.cffc.cfffc....
        ..............ffc.cffc.cfff.....
        .......c......ffc..ffffffff.....
        .....ffff.....ffcccffffffc......
        ...ccffffc....fffffffffffc......
        ..fffffffff...fffffffffffc......
        ccffcc.cfffc.cfffffffffffc......
        ..ff....fffffffffffffffffc......
        ..........cffffffffffffff.......
        ..........cffffffffffffff.......
        ...........ffffffffffffff.......
        ............ccfffffffffc........
        ..............fffffffffff.......
        ................cc.cfffffc......
        ....................fffffff.....
        ......................cffffcc...
        .......................fffffff..
        ........................ccffffc.
        ..........................ffffff
        ...........................fffff
        ..........................cfffff
        ..........................cfffc.
        .........................fffff..
        .........................fffff..
        ........................cfffc...
        .......................fffffc...
        .......................fffff....
        ......................cfffc.....
        ......................cfffc.....
        .....................fffff......
        `],
    200,
    false
    )
    pause(2800)
    scene.cameraShake(8, 1000)
    story.printCharacterText("I WILL END THIS WORLD AND YOU WILL BE FIRST!!! TRY AND PROTECT IT, BE MY GUEST", "Quella")
    controller.moveSprite(mySprite, 100, 0)
    final_fight = true
    sprites.setDataNumber(mySprite3, "quella hp", 5)
    mySprite3.setVelocity(randint(-150, 150), randint(-150, 150))
    mySprite3.setBounceOnWall(true)
})
let total = 0
let rose_sprite: Sprite = null
let dark_portal: Sprite = null
let mySprite2: Sprite = null
let mews = 0
let mew_sprite: Sprite = null
let feather_ability_sprite: Sprite = null
let bubble_crystal: Sprite = null
let candle_sprite: Sprite = null
let npc_sprite: Sprite = null
let pot_sprite: Sprite = null
let dark_magic_manuscript_seller: Sprite = null
let fish: Sprite = null
let bat2: Sprite = null
let kitty_cat: Sprite = null
let mySprite3: Sprite = null
let projectile: Sprite = null
let final_fight = false
let has_fish = false
let dark_candles = 0
let talked_to_cat = false
let dark_magic = false
let bubble2 = false
let flight = false
let roses_left = 0
let mySprite: Sprite = null
scene.setBackgroundColor(9)
if (blockSettings.exists("total")) {
    game.showLongText("You Beat The Game in " + blockSettings.readNumber("time") + " seconds!", DialogLayout.Bottom)
    blockSettings.clear()
    game.reset()
}
scene.setBackgroundImage(img`
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    .....................................................................................................................fff.ffff...................................
    ...................................................................................................................ff222f2222fff................................
    ................................................................................................................fff2ff2222222222ffff............................
    ..............................................................................................................ff22ff2f2222ff22222222f...........................
    .............................................................................................................ffff222f2222222ff2222222f..........................
    ............................................................................................................f22f2f222ffffff222f2222f2f..........................
    ...........................................................................................................f22222f2fff2222222ff222f2f...........................
    ............................................................................................................f22222ff222222fff22222fffff.........................
    ..........................................................................................................ffffff2222f22fff222f22fff2222ff.......................
    .........................................................................................................f222222fff22ff222222f2f2f222ff22f......................
    .........................................................................................................fffff22f222f22f22222ff2f222222f2f......................
    ............................................................................................................f2222f222222f222f22f222222222f......................
    .............................................................................................................f222f2222222f2f22f22222fffff.......................
    .............................................................................................................ff22f22222222f22f2222ff............................
    ..............................................................................................................f22f22222222f2f2222f..............................
    .....................................7777777777777777777.......................................................f22f22222222f2222f...............................
    .................................777777777777777777777777777....................................................ff2f2222222f22ff................................
    .............................7777777777777777777777777777777777...................................................ffff77777777f.................................
    ...........................77777777777777777777777777777777777777.....................................................ff777766..................................
    .........................77777777777777776666666666666666677777777......................................................777766............7.....................
    .......................77777777777766666666666666666666666666677777......................................................7776...........7776....................
    ......................7777777777666666666666666666666666666666667777.....................................................7776......f77f77f76....................
    ....................777777777666666666666......................667777....................................................7776.7777f77f7ff776....................
    ...................777777776666666666......777777.................7777.................................................ff77777777f77f7f77766....................
    ..................777777766666666........777777777.................777...............................................ff7777777777fffff77666.....................
    .................777777.6666666.........77777777777................7777.............................................f777777777fff7f777f7666.....................
    ................777777.666666..........777777777777.................777..............................................ff777777777777f777666......................
    ...............77777.666666...........77777777766666................777................................................ff77767777777f6666.......................
    ...............7777..6666............777777777666666................777................................................7777766666666666.........................
    ...............7777.6666.............77777777666666................7777...............................................77777666.666666...........................
    ..............7777.6666.............7777777766666..................777.........................................f.....77777766...................................
    ..............7777.666..............777777766666..................7777........................................f7f...777777766...................................
    ..............777.666..............777777766666...................7777.6..................................7777f7f777777777ff....................................
    ..............777.666..............77777766666...................7777..6..............................7777777f777f7777777766ff..................................
    ..............777.66...............7777766666...................7777..66............................777777777f777f777777766666f.................................
    ...............77766...............777776666...................77777.666..........................77777777777777777777777666ff..................................
    ...............7777...............7777766666.................777777.666......................ff.7777777777f66667777777766fff....................................
    ................7777..............777776666.................77777..666.......................f7ff7777777666f6666666666666.......................................
    .................7777............777776666................777777..6666.7777...................f77f777766f66f66666666666.........7777............................
    ..................77777..........7777.666...............7777777..666777777777................7f7777766666ff6f................77777777...........................
    ....................777.........777776666............77777777..666677777777777..............777f777666666..ff..............77777777777..........................
    ................................7777.666...........77777777...666777777777.777..............777777666666.................777777777.7777.........................
    ............................77.7777.666........777777777....666677777777.66677.............77777766666..................7777777..667777.........................
    ...........................77777777.666....77777777777....66666.777777766666776............7777766666..................7777777.666677776........................
    ..........................777777777777777777777777.....66666...777777766666677777777777777.777766666.................7777777.66666777766........................
    ..........................77777777777777777777.......66666....777777766666..7777777777777.777776666.................777777766666677777.66.......................
    ...........................77777777777............6666.......777777766666...777777777.....77777666.................7777777666666.7777..66.......................
    ............................7777777766.......................77777766666.....777766......77777766.................7777777666666.7777..66........................
    ............................77776677766.....................77777766666......77776666...777.77776................777777766666.77777...66........................
    ...........................777776677776.....................7777766666......77776666....777..77777..............777777766666777777...66.........................
    ...........................777766667777....................7777776666.......7777666....777....67777.............77777766666777777...66...77.....................
    ..........................7777766667777....................7777766666.......7777666....77.......77777..........7777776666777777...666...777.....................
    ..........................7777.666..7777..................7777776666.......7777.666...77..........77777.......777777767777777....666...777......................
    .........................7777.666....7777.................777776666........777..66....7............77777......777777677777......66....777.......................
    .........................7777.666.....7777................777776666.......7777.666..................77777.....7777776666.............7777.......................
    .........................777..66......77777...............77777666........777..66...................77777....7777776666.............7777........................
    ........................7777.666.......7777...............77777666.......777...66...................777776...7777776666............7777.........................
    ........................7777.6677.......7777..............7777666.......7777..66...................77777766..777776666............7777..........................
    .......................7777.66777.......77777.............7777666.......777...6....................77777666..777776666..........77777...........................
    .......................7777.6777.........77777............7777666......777...6....................777777666..77777666..........7777.............................
    .......................77776777...........77777............777766.....777................77......7777776666...7777766........77777..............................
    ......................77777777.............77777...........777766...7777...............777......77777766666...7777766......77777................................
    ......................77777777.............777777...........77777777777...............777......77777766666......777777777777777.................................
    ......................77777776..............777777...........77777777................777......77777..6666........77777777777......6.............................
    .......................77777666..............777777............666..................7777....777777..6666..........666777........................................
    .........................7666666..............777777............66.............77...777777777777...6666.............666.........................................
    ..........................66666................777777..........................777...77777777.....6666..........................................................
    ...........................666..................7777777........................777.......66......66.............................................................
    .................................................7777777.......................777.......66.....................................................................
    ..................................................77777777.....................777..............................................................................
    ...................................................777777777..................7777..............................................................................
    ....................................................7777777777...............7777...............................................................................
    ......................................................77777777777...........77777...............................................................................
    .......................................................777777777777777..777777777.6.............................................................................
    ........................................................677777777777777777777777.66.............................................................................
    ..........................................................6777777777777777777776666.............................................................................
    ...........................................................666777777777777777666666.............................................................................
    .............................................................666667777777766666666..............................................................................
    ...............................................................666666666666666666...............................................................................
    ..................................................................6666666666666.................................................................................
    ......................................................................666666....................................................................................
    ................................................................................................................................................................
    ......................c.......................................................c........................................ccc.........c............................
    ...............cc.cc..cc.......................................c.c...........cc........................................c.......c..cc............................
    ..................cc..cc.......................................c.c...........cc........................................c.......c..cc............................
    ......c..cc..c.c.cccc.cccc......cccc......cccc.cccccccc..cccc..c.c......cccc.ccccc..cccc..cccc...cccc..ccc.......ccc..cccc...cccccccccc...ccc..cccc.cccc...ccc..
    ......cc.cc.cc.cc.cc..cc..c........cc....cc..c.cc.cc..c.....cc.c.c......c..c.cc..c.....cc.cc..c..c..c.cc..c.....cc..c..c.......c..cc..c..cc..c.cc..cc..cc.c.....
    .......c.cc.c..cc.cc..cc..c.......ccc.....cc...cc..c..cc...ccc.c.c.....cc....cc..cc...ccc.cc..c.cc....ccccc.....c...cc.c.......c..cc..cc.c...cccc..cc..cc.ccc...
    .......cccccc..cc.cc..cc..c.....cc.cc......ccc.cc..c..cc.cc.cc.c.c.....cc....cc..cc.cc.cc.cc..c.cc....c.........c...cc.c.......c..cc..cc.c...cccc..cc..cc...ccc.
    .......ccc.cc..cc.cc..cc..c.....c..cc........c.cc..c..cc.c..cc.c.c.....cc....cc..cc.c..cc.cc..c.cc....c...c.....c...c..c.......c..cc..cc.c...c.cc..cc..cc....cc.
    ........c..cc..cc.ccc.cc..c.....ccccc.....cccc.cc..c..cc.ccccc.c.c......cccc.cc..cc.ccccc.cc..c..cccc..cccc......cccc..c.......ccccc..cc..cccc.cc..cc..cc.cccc..
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ..........................................................................................................................................................bb....
    ..........................................................................................................................................................bb....
    .............................................................................................................................bbbb..bbb.bbbb.bbb..bbb......b.b...
    .............................................................................................................................b..b..b..bb..bbb...bb.......bb.b...
    .............................................................................................................................b..bb.b..bbbbb.bbb..bbb.....bbbbb..
    .............................................................................................................................b..b..b..bb......bb...bb....b...b..
    .............................................................................................................................bbbb.bbb..bbbbbbbb.bbbb....bb...bb.
    .............................................................................................................................b..................................
    ............................................................................................................................bbb.................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    `)
pauseUntil(() => controller.A.isPressed())
scene.setBackgroundImage(img`
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    `)
starting_diolouge()
mySprite = sprites.create(img`
    . . . . f . . . . . . . . . . . 
    . . . . f f f . . . . . . . . . 
    . . . . f f f f f . . . . . . . 
    . . . . . f f f f f f . . . . . 
    . . . . f f f f f f f f f . . . 
    . . f f f f f f e e e . . . . . 
    . f f f e e f d d d f . . . . . 
    . . . e e d d f d f d . . . . . 
    . . . e e d d d d d d e e e . . 
    . . . e e d d f f f d e e e . . 
    . . f f f c d 1 d 1 . . e . . . 
    . . f c c c c c c c . . e . . . 
    . . . f f f c c c c . . e . . . 
    . . . . c c c d c c c d e . . . 
    . . . . c c c c c c . . e . . . 
    . . . c c c c c c c . . e . . . 
    `, SpriteKind.Player)
roses_left = 4
controller.moveSprite(mySprite, 100, 0)
mySprite.ay = 500
scene.cameraFollowSprite(mySprite)
scene.setBackgroundColor(9)
flight = false
bubble2 = false
dark_magic = false
talked_to_cat = false
dark_candles = 0
characterAnimations.loopFrames(
mySprite,
[img`
    . . . . f . . . . . . . . . . . 
    . . . . f f f . . . . . . . . . 
    . . . . f f f f f . . . . . . . 
    . . . . . f f f f f f . . . . . 
    . . . . f f f f f f f f f . . . 
    . . f f f f f f e e e . . . . . 
    . f f f e e f d d d f . . . . . 
    . . . e e d d f d f d . . . . . 
    . . . e e d d d d d d . e e e . 
    . . . e e d d f f f d . e e e . 
    . . f f f c d 1 d 1 . . . e . . 
    . . f c c c c c c c . . . e . . 
    . . . f f f c c c c . . . e . . 
    . . . . c c c d c c c c d e . . 
    . . . . c c c c c c . . . e . . 
    . . . c c c c c c c . . . e . . 
    `],
500,
characterAnimations.rule(Predicate.FacingRight)
)
characterAnimations.loopFrames(
mySprite,
[img`
    . . . . . . . . . . . f . . . . 
    . . . . . . . . . f f f . . . . 
    . . . . . . . f f f f f . . . . 
    . . . . . f f f f f f . . . . . 
    . . . f f f f f f f f f . . . . 
    . . . . . e e e f f f f f f . . 
    . . . . . f d d d f e e f f f . 
    . . . . . d f d f d d e e . . . 
    . . e e e d d d d d d e e . . . 
    . . e e e d f f f d d e e . . . 
    . . . e . . 1 d 1 d c f f f . . 
    . . . e . . c c c c c c c f . . 
    . . . e . . c c c c f f f . . . 
    . . . e d c c c d c c c . . . . 
    . . . e . . c c c c c c . . . . 
    . . . e . . c c c c c c c . . . 
    `],
500,
characterAnimations.rule(Predicate.FacingLeft)
)
spawn_map()
profilelife.setName("Rose")
profilelife.setMaxLife(5)
info.setLife(5)
profilelife.setTextColor(1)
profilelife.setProfileImage(img`
    . . f f f f . . . . . . . . . . 
    . . . f f f f . . . . . . . . . 
    . . . . f f f f f . . . . . . . 
    . . . . f f f f f f f f . . . . 
    . . . . f f f f f f f f f f f f 
    . . . f f f f f f f f f f f f f 
    . . . f f f f f f f f f f f f f 
    . . f f f f f f f f f f f f . . 
    f f f f f f f f f f d d d e . . 
    f f f f f f d d d d d d d d . . 
    f f e d d d d f d d d f d d . . 
    . e e d d d d d f d f d d d . . 
    . e e d d d d d d d d d d d . . 
    . e e d d d f f f f f f d d . . 
    . e e e d d d 1 d d 1 d d . . . 
    . e e e . d d d d d d d . . . . 
    `)
info.startCountup(true)
game.onUpdate(function () {
    for (let value21 of spriteutils.getSpritesWithin(SpriteKind.bat, 80, mySprite)) {
        value21.follow(mySprite, 65)
    }
})
forever(function () {
    for (let value22 of tiles.getTilesByType(assets.tile`myTile27`)) {
        tiles.setWallAt(value22, false)
        tiles.setTileAt(value22, assets.tile`myTile28`)
    }
    pause(2000)
    for (let value23 of tiles.getTilesByType(assets.tile`myTile28`)) {
        tiles.setWallAt(value23, true)
        tiles.setTileAt(value23, assets.tile`myTile27`)
    }
    pause(2000)
})
game.onUpdateInterval(6000, function () {
    info.changeLifeBy(1)
})
